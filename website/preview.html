<html>
    <head>
        <script>
        async function approve() {
            const file_name = document.getElementById("file_name").value;
            const url = './approve';
            const data = {'approval': "OK",
                        'file_name': file_name};
            await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            });
            console.log(data);
            window.location.replace(window.location.origin)
        }

        async function cancel() {
            const url = './approve';
            const data = {'approval': "CANCEL"};
            const res = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            });
            console.log(data);
            window.location.replace(window.location.origin)
        }
        </script>
        <style type="text/css">
        .input,
            .textarea {
            border: 1px solid #ccc;
            font-family: courier;
            white-space: pre-wrap;
            color:#F0A020;
            background-color:#1F274A;
            font-size: inherit;
            padding: 1px 6px;
            }
            .textarea {
            display: block;
            width: 100%;
            overflow: hidden;
            resize: both;
            min-height: 40px;
            line-height: 20px;
            }
            .textarea[contenteditable]:empty::before {
            content: "Your code here";
            color: gray;
            }
        </style>
    </head>
    <body style="background-color:#0F173A;">
        <h1 style="color: #0F173A; font-family:courier; text-align: center;">
            <span style="color: #37BEAF;">
                Yeti Code Editor
            </span>
        </h1>
        <label for="code"style="color:white;font-family:courier;">
            Preview before upload:
        </label>
        <p style="color:#F0A020; background-color:#1F274A; text-align: left; vertical-align: top; font-family:courier;">{code_from_temp_file}
        </p>
        <br/>
        <input id="file_name" type="text" placeholder="Enter file name"/>
        <br/>
        <input type="submit" value="OK" onclick="approve()" />
        <input type="submit" value="Cancel" onclick="cancel()" />
    <body>
</html>
